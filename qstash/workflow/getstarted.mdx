---
title: "Getting Started"
---

Upstash Workflow lets you write **durable, reliable and performant serverless functions**. Get delivery guarantees, automatic retries on failure, scheduling and much more without managing any infrastructure.

- **No more function timeouts** on serverless platforms
- **Automatic error recovery**, continue a workflow run from any step
- Integrates perfectly with your existing infrastructure; all code runs on your servers
- **Delivery guarantees**, batching, schedules and more

## Quickstarts

Workflow supports Next.js, Cloudflare Workers and many more platforms. [See all supported platforms](/qstash/workflow/quickstarts/platforms).

<CardGroup cols={2}>
  <Card title="Next.js" icon="node-js" href="/qstash/workflow/quickstarts/vercel-nextjs">
    Build a Next.js application with QStash Workflow
  </Card>
  <Card title="Cloudflare Workers" icon="cloudflare" href="/qstash/workflow/quickstarts/cloudflare-workers">
    Use and deploy Upstash Workflow on Cloudflare Workers
  </Card>
</CardGroup>




## Getting started

To get started, create a separate step for each piece of your business logic. This way, each step can build on the data returned by the prior step. In case of an error, Upstash Workflow retries the failed step individually without needing to re-run any previous steps:

```typescript
import { serve } from "@upstash/qstash/nextjs";
import { sendEmail } from "./emailUtils";

// Type-safety for starting our workflow
interface InitialData {
  userId: string
  email: string
  name: string
}

export const POST = serve<InitialData>(async (context) => {
  const { userId, email, name } = context.requestPayload;

  // Step 1: Send welcome email
  await context.run("send-welcome-email", async () => {
    await sendEmail(email, "Welcome to our service!");
  });

  // Step 2: Wait for 3 days (in seconds)
  await context.sleep("sleep-until-follow-up", 60 * 60 * 24 * 3);

  // Step 3: Generate personalized follow-up message
  const aiResponse = await context.call(
    "generate-personalized-message",
    "https://api.openai.com/v1/chat/completions",
    "POST",
    {
      model: "gpt-3.5-turbo",
      messages: [
        { role: "system", content: "You are an assistant creating personalized follow-up messages." },
        { role: "user", content: `Create a short, friendly follow-up message for ${name} who joined our service 3 days ago.` }
      ]
    },
    { headers: { ... } }
  );

  const personalizedMessage = aiResponse.choices[0].message.content;

  // Step 4: Send personalized follow-up email
  await context.run("send-follow-up-email", async () => {
    await sendEmail(email, personalizedMessage);
  });
});
```

Each step is guaranteed to be executed with automatic recovery when a workflow should fail mid-execution or your service is temporarily unavailable.

<Tip>
  Any HTTP request using `context.call` does not count
  towards your function's execution time (and increase your
  serverless bill). It can also run for up to 2 hours,
  completely bypassing any platform-specific function
  timeouts.
</Tip>

Call the API endpoint with the initial data to trigger our durable onboarding workflow from the example above:

```bash
curl -XPOST https://<YOUR-APP-URL>/api -d '{"userId": 123, "email": "john@example.com", "name": "John }'
```

This API call returns a `workflowRunId`:

```json
{ "workflowRunId": "wfr_TzazoUCuZmFGp2u9cdy5K" }
```

You can use this ID to [see the workflow status](/qstash/workflow/howto/monitor) in real-time via our dashboard or to [cancel the run](/qstash/workflow/howto/cancel) if needed.

---

Here are more details about what the `context` object does:

- [context.run](/qstash/workflow/basics/context#context-run)
- [context.sleep](/qstash/workflow/basics/context#context-sleep)
- [context.sleepUntil](/qstash/workflow/basics/context#context-sleepuntil)
- [context.call](/qstash/workflow/basics/context#context-call)

See [caveats](/qstash/workflow/basics/caveats) for more complex API usage and best-practices when using Upstash Workflow.

---

Guides on common workflow topics:

- [Cancel a running workflow](/qstash/workflow/howto/cancel)
- [Handle failed workflow runs](/qstash/workflow/howto/failures)
- [Monitor active workflows in real-time](/qstash/workflow/howto/failures)
- [Schedule repeated workflow runs](/qstash/workflow/howto/schedule)
- [Secure a workflow endpoint](/qstash/workflow/howto/security)
- [Handle workflow route code changes](/qstash/workflow/howto/changes)
- [Develop your workflows locally](/qstash/workflow/howto/local-development)

If you're curious about the behind-the-scenes about how we ensure separate step execution or prevent serverless timeouts, we wrote about it [here](/qstash/workflow/how)! :)

Here is our [Upstash Workflow roadmap](/qstash/workflow/roadmap) to see what we planned for the future.
