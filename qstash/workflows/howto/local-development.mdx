---
title: "Local Development"
---

QStash Workflows require a publicly accessible API endpoint to function. If you want to develop locally, you'll need to use a tunneling service. While we plan to offer a native solution in the future, for now, please use a third-party tunneling service.

## Starting a Tunnel

[ngrok](https://ngrok.com) is free service that provides a public endpoint and forwards all traffic to your local server.

#### Sign Up

Create an account on [dashboard.ngrok.com/signup](https://dashboard.ngrok.com/signup) and follow the [setup instructions](https://dashboard.ngrok.com/get-started/setup) to download the ngrok CLI and connect your account:

```bash
ngrok config add-authtoken XXX
```

#### Start the Tunnel

Choose the port where your application is running. For example, if Next.js is using port 3000, forward it like this:

```bash
ngrok http 3000
```

This will provide you with output similar to the following:

```plaintext
Session Status                online
Account                       Mustafa Sancar Koyunlu (Plan: Free)
Version                       3.1.0
Region                        Europe (eu)
Latency                       -
Web Interface                 http://127.0.0.1:4040
Forwarding                    https://e02f-2a02-810d-af40-5284-b139-58cc-89df-b740.eu.ngrok.io -> http://localhost:3000
Connections                   ttl     opn     rt1     rt5     p50     p90
                              0       0       0.00    0.00    0.00    0.00
```

Copy the `Forwarding` URL from ngrok and use it as the `url` parameter in the next section, appending the path to your API (e.g., `/api/example`).

To debug what ngrok is doing, visit [http://127.0.0.1:4040](http://127.0.0.1:4040).

## Preparing a Local Server to Serve Workflows

For detailed instructions on different frameworks, check the [Getting Started](/qstash/workflows/getstarted) and [Platforms](/qstash/workflows/platforms/platforms) pages. Below is an example using Next.js for local development.

In this setup, we'll use the `url` parameter in the `serve` method to override the default URL. Without this, the SDK will report its URL as `localhost`, preventing QStash from accessing the endpoint. Note that setting the `url` is only necessary for local development.

Your endpoint might look something like this:

<CodeGroup>

```javascript 
import { serve } from "@upstash/qstash/nextjs";
import { retrieveEmail, fetchFromLLm } from "../../../lib/util";

export const POST = serve<string>(
  async (context) => {
    const input = context.requestPayload;

    await context.run("retrieveEmail", async () => {
      return retrieveEmail(input.id);
    });

    await context.run("askLLM", async () => {
      return fetchFromLLm(input.question);
    });
  }, 
  { url: "https://d2ed-176-236-134-194.ngrok-free.app/api/example" }
);
```

</CodeGroup>

<Warning>
Ensure that the port of your local Next.js server matches the one you're using with ngrok.
</Warning>

## Calling the Workflow

You can now test your setup by calling the workflow URL:

```bash 
curl -XPOST https://d2ed-176-236-134-194.ngrok-free.app/api/example -d 'testData'
```

## Debugging

If messages aren't being delivered or something isn't working as expected, you can [monitor logs](/qstash/workflows/howto/monitor) from the QStash Workflows tab.
